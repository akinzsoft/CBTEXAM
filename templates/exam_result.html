{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Exam Result - {{ scholarship.title }}</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Inter', sans-serif;
    background: #f5f7fb;
    margin: 0;
    padding: 20px;
}
.container {
    max-width: 700px;
    margin: auto;
    background: #fff;
    padding: 2rem;
    border-radius: 1rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    text-align: center;
}
.logo {
    display: block;
    margin: 0 auto 1rem auto;
    max-width: 150px;
}
h1 {
    color: #6610f2;
    margin-bottom: 1rem;
}
.result-summary {
    margin-bottom: 2rem;
}
.result-summary div {
    margin-bottom: 0.5rem;
    font-weight: 500;
}
.status {
    font-weight: 600;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    color: #fff;
    display: inline-block;
    margin-top: 0.5rem;
}
.status.pass { background-color: #28a745; }
.status.fail { background-color: #dc3545; }

/* Question progress bars */
.progress-container {
    background-color: #e0e0e0;
    border-radius: 1rem;
    overflow: hidden;
    height: 30px;
    margin: 1rem 0;
    display: flex;
}
.progress-correct {
    background-color: #28a745;
    height: 100%;
    text-align: center;
    color: #fff;
    line-height: 30px;
    font-weight: 600;
    transition: width 1s ease-in-out;
}
.progress-wrong {
    background-color: #dc3545;
    height: 100%;
    text-align: center;
    color: #fff;
    line-height: 30px;
    font-weight: 600;
    transition: width 1s ease-in-out;
}
</style>
</head>
<body>
<div class="container">

    <!-- Logo -->
    <div style="text-align: center;">
                            <img src="{% static 'img/clientlogo.png' %}" alt="Logo" style="width:120px; height:auto;">
                        </div>
                        <div class="council-name">Ukwuani Local Government Council CBT</div>

    <h1>Exam Result</h1>

    <div class="result-summary">
    <div><strong>Student:</strong> {{ request.user.get_full_name }}</div>
    <div><strong>Date:</strong> {{ answers.0.submitted_at|date:"F j, Y, H:i" }}</div>
    <div><strong>Total Score:</strong> {{ total_score }} / {{ total_possible }}</div>
    <div><strong>Student Percentage Score:</strong> {{ percentage }}%</div>
    <div><strong>Exam Passing Score:</strong> {{ passing_score }}%</div>

    <!-- Status -->
    <div><strong>Status:</strong>
        <span class="status {% if percentage >= passing_score %}pass{% else %}fail{% endif %}">
            {{ status }}
        </span>
    </div>
</div>

    <!-- Question-based Progress Bar -->
    <h2>Performance</h2>
    <div class="progress-container">
        <div id="correctBar" class="progress-correct">0</div>
        <div id="wrongBar" class="progress-wrong">0</div>
    </div>
    <div>
        <span>Total Questions: {{ answers|length }}</span> | 
        <span>Correct: {{ correct_count }}</span> | 
        <span>Wrong: {{ wrong_count }}</span>
    </div>
</div>

<script>
window.addEventListener("DOMContentLoaded", () => {
    const total = {{ answers|length }};
    const correct = {{ correct_count }};
    const wrong = {{ wrong_count }};

    const correctBar = document.getElementById("correctBar");
    const wrongBar = document.getElementById("wrongBar");

    correctBar.style.width = (correct / total * 100) + "%";
    correctBar.textContent = correct;

    wrongBar.style.width = (wrong / total * 100) + "%";
    wrongBar.textContent = wrong;
});
</script>

</body>
</html>
